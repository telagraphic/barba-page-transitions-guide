<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Rules</title>

  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" />

  <script async defer src="https://buttons.github.io/buttons.js"></script>

  <link rel="preload" href="fonts/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="fonts/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin>

  <link rel="preload" href="fonts/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="fonts/JetBrainsMono-Medium.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="fonts/JetBrainsMono-Bold.woff2" as="font" type="font/woff2" crossorigin>

  <style>
    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Regular.woff2') format('woff2'), url('fonts/Inter-Regular.woff') format('woff');
      font-display: swap;
      font-weight: 500;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Medium.woff2') format('woff2'), url('fonts/Inter-Medium.woff') format('woff');
      font-display: swap;
      font-weight: 600;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Bold.woff2') format('woff2'), url('fonts/Inter-Bold.woff') format('woff');
      font-display: swap;
      font-weight: 700;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-ExtraBold.woff2') format('woff2'), url('fonts/Inter-ExtraBold.woff') format('woff');
      font-display: swap;
      font-weight: 800;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Black.woff2') format('woff2'), url('fonts/Inter-Black.woff') format('woff');
      font-display: swap;
      font-weight: 900;
    }
  </style>
</head>

<body>
  <header class="header">
    <section class="github-button-section">
      <a class="github-button" href="https://github.com/telagraphic/page-transitions" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star telagraphic/page-transitions on GitHub">Star</a>
    </section>
    <nav>
      <a href="index.html">Home</a>
      <a href="guide.html">Guide</a>
      <a href="resources.html">Resources</a>
    </nav>
  </header>

  <section data-barba="wrapper">
    <main data-barba="container" data-barba-namespace="index" data-title="Intro">
      <article class="index page">
        <header>
          <h1>Code</h1>
        </header>

        <section class="index__section">
          <h2 style="padding: 2rem 0 0 0;">Asynchronous</h2>
          <p>
            Writing code in your hooks can take several forms. But one thing to keep in mind is that
            transitions are <b>asynchronous</b>. Your transition code in GSAP, Anime.js, Three.js
            or whatever you choose, you must realize that when these transitions are done, we need to tell the
            hook that we are done and start the next hook change.

            <a href="https://github.com/barbajs/barba/issues/357">Here is a good explanation from the issues board</a>.
            <a href="https://eloquentjavascript.net/11_async.html">Eloquent Javascript</a> has a nice chapter on asynchronous programming.
          </p>

          <p>
            All the different ways are <a href="https://barba.js.org/docs/advanced/hooks/#Base-hooks">explained in the docs</a>.
          </p>

          <p>
            Promises are meant for such situations, most of the code in these examples use promises.
            Barba also allows for sync mode, which means that the <b>enter</b> and <b>leave</b> hooks play at the same time.
            This requires adding a delay into the code to make sure the timeline of things works out.
          </p>


        </section>

        <section class="index__section">
          <h2 style="padding: 2rem 0 0 0;">Synchronous</h2>
          <p>
            The below code is synchronous, it runs but Barba does not know it is complete. The end result is that
            no beautiful transition code is run.
          </p>
          <pre>
            <code class="language-js">
              barba.init({
                transitions: [
                  {
                    sync: true,
                    name: 'fade',
                    enter({current, next, trigger}) {
                      const timeline = gsap.timeline();
                      timeline
                        .to(current.container, {opacity: 1, ease: 'circ'});
                    },
                    leave({current, next, trigger}) {
                      const timeline = gsap.timeline();
                      timeline
                        .to(current.container, {opacity: 0, ease: 'circ'});
                    }
                  }
                ],
                debug: true
              });
            </code>
          </pre>
        </section>
      </article>
    </main>
  </section>

  <footer class="footer">
    <section class="footer__section">
      <p>
        Made with the <a href="https://github.com/dracula/dracula-theme/">Dracula Theme</a>.
      </p>
      <p>
        Not responsive for mobile, use your laptop/desktop for reading this guide.
      </p>
    </section>
  </footer>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
<script src="js/barba.core.js"></script>
<script src="js/barba.css.js"></script>
<script src="js/barba.prefetch.js"></script>
<script src="js/barba.router.js"></script>
<script src="js/gsap.min.js"></script>
<script src="js/app.js"></script>

</html>