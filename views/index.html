<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Images</title>

  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" />

  <script async defer src="https://buttons.github.io/buttons.js"></script>

  <link rel="preload" href="fonts/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="fonts/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin>

  <style>
    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Regular.woff2') format('woff2'), url('fonts/Inter-Regular.woff') format('woff');
      font-display: swap;
      font-weight: 500;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Medium.woff2') format('woff2'), url('fonts/Inter-Medium.woff') format('woff');
      font-display: swap;
      font-weight: 600;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Bold.woff2') format('woff2'), url('fonts/Inter-Bold.woff') format('woff');
      font-display: swap;
      font-weight: 700;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-ExtraBold.woff2') format('woff2'), url('fonts/Inter-ExtraBold.woff') format('woff');
      font-display: swap;
      font-weight: 800;
    }

    @font-face {
      font-family: "Inter";
      src: url('fonts/Inter-Black.woff2') format('woff2'), url('fonts/Inter-Black.woff') format('woff');
      font-display: swap;
      font-weight: 900;
    }
  </style>
</head>

<body>
  <header class="header">
    <section class="github-button-section">
      <a class="github-button" href="https://github.com/telagraphic/page-transitions" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star telagraphic/page-transitions on GitHub">Star</a>
      <a class="docs" href="https://barba.js.org/docs/getstarted/intro/">Docs</a>
    </section>
    <nav>
      <a href="index.html">Home</a>
      <a href="gallery.html">Gallery</a>
      <a href="guide.html">Guide</a>
      <a href="resources.html">Resources</a>
    </nav>
  </header>

  <section data-barba="wrapper">
    <main data-barba="container" data-barba-namespace="index" data-title="Intro">
      <article class="index page">
        <header>
          <h1>Images</h1>
        </header>

        <section class="index__section">

          <p>
            The <b>gallery</b> page contains images that we want to animate in but we want to make
            sure they have loaded first. A common library to use is the great <a href="https://github.com/desandro/imagesloaded">imagesLoaded.js</a>.
            Take a look at the <b>gallery</b> transition on line <b>54</b> in <b>app.js</b>.
          </p>
          <p>
            <b>imagesLoaded.js</b> needs a selector and callback function to work. I used all the <b>img</b> elements
            for the first argument. You could also use a container selector and it will get all the descendant images therein.
          </p>
          <p>
            For the callback, we simply cut and paste our GSAP code into the anonymous function but why?
            Since we moved the GSAP code into the imagesLoaded callback it breaks our animation code and will show
            our <b>next.container</b> which causes unwanted 'content flickering'.

            We hide the container and the images on lines <b>62-63</b> so that after the imagesLoaded code is done, the transition can
            work it's magic. Comment out these lines and see the difference.
          </p>
          <pre>
            <code class="language-javascript">
enter({current, next, trigger}) {
  return new Promise(resolve => {
    const images = document.querySelectorAll('img');

    gsap.set(next.container, {opacity: 0, y: 50});
    gsap.set('.gallery__photo', {opacity: 0});

    imagesLoaded(images, () => {
      const timeline = gsap.timeline({
        onComplete() {
          resolve();
        }
      })

      timeline
        .to(next.container, {opacity: 1, y: 0, delay: 1, ease: 'power4.out'})
        .to('.gallery__photo', {opacity: 1, stagger: .125});
    })
  })
}
            </code>
          </pre>
        </section>
      </article>
    </main>
  </section>

  <footer class="footer">
    <section class="footer__section">
      <p>
        Made with the <a href="https://github.com/dracula/dracula-theme/">Dracula Theme</a>.
      </p>
      <p>
        Not responsive for mobile, use your laptop/desktop for reading this guide.
      </p>
    </section>
  </footer>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
<script src="js/imagesLoaded.js"></script>
<script src="js/barba.core.js"></script>
<script src="js/barba.css.js"></script>
<script src="js/barba.prefetch.js"></script>
<script src="js/barba.router.js"></script>
<script src="js/gsap.min.js"></script>
<script src="js/app.js"></script>

</html>